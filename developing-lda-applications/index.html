
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Developing LDA Applications - Linked Data for Applications (LDA)</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="Developing LDA Applications Apr 2nd, 2014 As with most new technologies, the easiest way to get started is to look at an example. To help you get an &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ld4apps.github.io/developing-lda-applications">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Linked Data for Applications (LDA)" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Linked Data for Applications (LDA)</a></h1>
  
    <h2>Composite Apps for the Cloud</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ld4apps.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/archives/">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">Developing LDA Applications</h1>
    <p class="meta">








  


<time datetime="2014-04-02T13:45:00-04:00" pubdate data-updated="true">Apr 2<span>nd</span>, 2014</time></p>
  </header>
  
  <p>As with most new technologies, the easiest way to get started is to look at an example. To help you get an idea of how LDA applications are implemented, we&rsquo;ll start with a very simple &lsquo;Todo List&rsquo; application from the <a href="https://github.com/ld4apps/lda-examples">lda-examples</a> repository. You should be able to understand the framework just by reading, but you might also like to install the software yourself and follow along in a more hands-on fashion. If so, refer to <a href="/downloading-the-software/index.html">Downloading the Software</a> before proceeding.</p>

<p>To get started, every LDA-based application requires at least two files:</p>

<ol>
<li> logic_tier.py</li>
<li> application.js</li>
</ol>


<h3>logic_tier.py</h3>

<p>This is a python file that implements the server application, which takes the form of a Python class. This class can get all the standard REST/RDF behavior by subclassing a class provided in the framework. The simplest file to get started looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">example_logic_tier</span> <span class="kn">as</span> <span class="nn">base</span>
</span><span class='line'><span class="k">class</span> <span class="nc">Domain_Logic</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">Domain_Logic</span><span class="p">):</span>
</span><span class='line'>    <span class="k">pass</span>
</span></code></pre></td></tr></table></div></figure>


<p>Because of the code it inherits, this trivial implementation already supports the full HTTP/REST protocol. You will eventually override these behaviors to implement business logic specific to your application &ndash; validations, augmentations, side-effects, and so on &ndash; but the default behavior is a very good starting point.</p>

<p>The inherited code comes from two library modules called logiclibrary and mongodbstorage. When these are more mature, we will no doubt supply them as Python &lsquo;eggs&rsquo;. For now they are available in the <a href="https://github.com/ld4apps/lda-serverlib">lda-serverlib</a> repository which you need to download from github.</p>

<p>If you look at the &lsquo;Todo List&rsquo; application, you&rsquo;ll see that its <em>logic_tier.py</em> implementation class (located in <em>lda-examples/todo/src/logic_tier.py</em>), is exactly the simple implementation shown above. It adds no custom server implementation code of its own.</p>

<h3>application.js</h3>

<p>This is a Javascript file that implements your client application, which is usually a mobile or web user interface. This file, and any others it references, can be anywhere on the web &ndash; they do not have to be on your business logic server. <em>application.js</em> can do anything it wants, but the following example file will take advantage of the libraries that LDA provides to support REST and RDF, and still let your application do pretty much anything it wants.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">onload_function</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">head</span>  <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">util_script</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">util_script</span><span class="p">.</span><span class="nx">type</span><span class="o">=</span> <span class="s1">&#39;text/javascript&#39;</span>
</span><span class='line'>    <span class="nx">util_script</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s1">&#39;/clientlib/utils.js&#39;</span>
</span><span class='line'>    <span class="nx">util_script</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">ld_util</span><span class="p">.</span><span class="nx">onload</span><span class="p">({},</span> <span class="s1">&#39;exampleserver/application.html&#39;</span><span class="p">,</span> <span class="kc">null</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">util_script</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span> <span class="nx">onload_function</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see, what this code basically does is load the LDA <em>utils.js</em> client libarary (see <a href="https://github.com/ld4apps/lda-clientlib">lda-clientlib</a>) first, and then loads <em>application.html</em> which is a file you will write. If you choose to use the LDA client libraries (which we recommend) your <em>application.html</em> must contain an html body, but no html, header or body tags. Other than that, you can put whatever you like in it &ndash; it can load and execute whatever javascript libraries it likes, and include whatever html it likes. A very reasonable thing to do is to use this &lsquo;standard&rsquo; implementation of <em>application.js</em> shown above unmodified and consider <em>application.html</em> as being the real &lsquo;root&rsquo; of your UI application. This is, after all, the normal way you build a web or mobile application &ndash; it all starts with your root html file. We will explain more later on this.</p>

<p>If you look at the &lsquo;Todo List&rsquo; application&rsquo;s version of <em>application.js</em>, you&rsquo;ll notice that it is slightly more complicated than the simplest &lsquo;standard&rsquo; one above. It looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">BP</span> <span class="o">=</span> <span class="s1">&#39;http://open-services.net/ns/basicProfile#&#39;</span>
</span><span class='line'><span class="nx">TD</span> <span class="o">=</span> <span class="s1">&#39;http://example.org/todo#&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">onload_function</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">type_to_theme_map</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>    <span class="nx">type_to_theme_map</span><span class="p">[</span><span class="nx">BP</span><span class="o">+</span><span class="s1">&#39;Container&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;/todo/list.html&#39;</span>
</span><span class='line'>    <span class="nx">type_to_theme_map</span><span class="p">[</span><span class="nx">TD</span><span class="o">+</span><span class="s1">&#39;Item&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;/todo/item.html&#39;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">head</span>  <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">util_script</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">util_script</span><span class="p">.</span><span class="nx">type</span><span class="o">=</span> <span class="s1">&#39;text/javascript&#39;</span>
</span><span class='line'>    <span class="nx">util_script</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s1">&#39;/clientlib/utils.js&#39;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">util_script</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">ld_util</span><span class="p">.</span><span class="nx">onload</span><span class="p">({},</span> <span class="nx">type_to_theme_map</span><span class="p">,</span> <span class="kc">null</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">util_script</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span> <span class="nx">onload_function</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see, the only difference is that instead of loading the single <em>applications.html</em> file, it constructs and passes a simple type-to-file map, instucting the framework to load one of several (in this case 2) html files, depending on the (RDF) type of the resource being loaded. If the resource is a (todo) item, we load <em>item.html</em> to display the individual item. If the resource is a container, we load <em>list.html</em> to display the todo list iteself. This demonstrates the fundamental pattern that the LDA framework uses to implement <a href="http://ld4apps.github.io/lda-client-libraries/index.html">Single Page Applictions (SPAs)</a>. We&rsquo;ll look at the &lsquo;Todo List&rsquo; client implementation in more detail below.</p>

<p>The &lsquo;Todo List&rsquo; sample includes a couple of other things any LDA application typically needs:</p>

<ol>
<li><p>A setup.py file &ndash; You can execute this server file with Python to download the python dependencies of the framework. [We do our best to minimize dependencies, but we do have a few. Currently they are: requests, webob, pycrypto, pymongo, isodate, python-dateutil, rdflib, and werkzeug. requests and webob are popular python libraries that implement functions for sending http requests and reading data from http inputs. pycrypto is a cryptography library that is only required if you are using the authentication feature. pymongo is the python client library for MongoDB. isodate and python-dateutil provide methods to help with Date formatting and parsing. rdflib allows us to support a broad range of RDF data formats without any work on the application developer&rsquo;s part. werkzeug is only used in the single-application development environment, and then only to serve static files.]</p></li>
<li><p>A shell/bat command to start the application in a python web server. This is only used for development configurations &ndash; in production this job would fall to standard web servers and application servers like Apache, Nginx, uWSGI, GUnicorn etc.</p></li>
</ol>


<h2>Running the Todo Application</h2>

<p>We will now go through a simple demo using a browser to add and display todo items. The first thing to do is run the todo application server in a command/shell window:</p>

<p><img src="images/image1.png" alt="" /></p>

<p>At this point, you can go to a browser and enter the address &ldquo;localhost:3007/items&rdquo;. In the browser you will see something like this:</p>

<p><img src="images/image2.png" alt="" /></p>

<p>You can add todo entries to the list by entering them in the text field and pressing the &lsquo;Add Todo Item&rsquo; button:</p>

<p><img src="images/image3.png" alt="" /></p>

<p>So, how is this application working? It all starts with the page initially returned from the todo server.
If you look at the source of the &lsquo;todo list&rsquo; page:</p>

<p><img src="images/image5.png" alt="" /></p>

<p>you will see something like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'><span class="nt">&lt;head&gt;</span>
</span><span class='line'>    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;/todo/application.js&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;/head&gt;</span>
</span><span class='line'><span class="nt">&lt;body&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">graph=</span><span class="s">&quot;http://localhost:3007/items&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">resource=</span><span class="s">&quot;http://localhost:3007/items/4.3&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;span</span> <span class="na">property=</span><span class="s">&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&quot;</span> <span class="nt">&gt;</span>http://example.org/todo#Item<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://ibm.com/ce/ns#owner&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:3001/unknown_user/c655a7bf-41d5-4622-837a-57cb611bb79b&quot;</span> <span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>            <span class="nt">&lt;span</span> <span class="na">property=</span><span class="s">&quot;http://purl.org/dc/terms/title&quot;</span> <span class="nt">&gt;</span>Find out about LDA<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://ibm.com/ce/ac/ns#resource-group&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:3007/&quot;</span> <span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>            <span class="nt">&lt;span</span> <span class="na">property=</span><span class="s">&quot;http://ibm.com/ce/ns#modificationCount&quot;</span> <span class="na">datatype=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema#integer&quot;</span> <span class="nt">&gt;</span>0<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>            <span class="nt">&lt;span</span> <span class="na">property=</span><span class="s">&quot;http://ibm.com/ce/ns#lastModified&quot;</span> <span class="na">datatype=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema#dateTime&quot;</span> <span class="nt">&gt;</span>2014-04-02T20:38:10.275000+00:00<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>            <span class="nt">&lt;span</span> <span class="na">property=</span><span class="s">&quot;http://purl.org/dc/terms/created&quot;</span> <span class="na">datatype=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema#dateTime&quot;</span> <span class="nt">&gt;</span>2014-04-02T20:38:10.275000+00:00<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://ibm.com/ce/ns#lastModifiedBy&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:3001/unknown_user/c655a7bf-41d5-4622-837a-57cb611bb79b&quot;</span> <span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://ibm.com/ce/ns#allVersions&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:3007/items/4.3/allVersions&quot;</span> <span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://purl.org/dc/terms/creator&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:3001/unknown_user/c655a7bf-41d5-4622-837a-57cb611bb79b&quot;</span> <span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">resource=</span><span class="s">&quot;http://localhost:3007/items&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&quot;</span> <span class="na">href=</span><span class="s">&quot;http://open-services.net/ns/basicProfile#Container&quot;</span> <span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://ibm.com/ce/ns#owner&quot;</span> <span class="na">href=</span><span class="s">&quot;http://ibm.com/ce/user/admin&quot;</span> <span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://www.w3.org/2000/01/rdf-schema#member&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:3007/items/4.3&quot;</span> <span class="na">one-of-many</span><span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://www.w3.org/2000/01/rdf-schema#member&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:3007/items/5.1&quot;</span> <span class="na">one-of-many</span><span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://ibm.com/ce/ac/ns#resource-group&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:3007/&quot;</span> <span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://open-services.net/ns/basicProfile#membershipSubject&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:3007/items&quot;</span> <span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://open-services.net/ns/basicProfile#membershipPredicate&quot;</span> <span class="na">href=</span><span class="s">&quot;http://www.w3.org/2000/01/rdf-schema#member&quot;</span> <span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">resource=</span><span class="s">&quot;http://localhost:3007/items/5.1&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;span</span> <span class="na">property=</span><span class="s">&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&quot;</span> <span class="nt">&gt;</span>http://example.org/todo#Item<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://ibm.com/ce/ns#owner&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:3001/unknown_user/c655a7bf-41d5-4622-837a-57cb611bb79b&quot;</span> <span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>            <span class="nt">&lt;span</span> <span class="na">property=</span><span class="s">&quot;http://purl.org/dc/terms/title&quot;</span> <span class="nt">&gt;</span>Start to use LDA<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://ibm.com/ce/ac/ns#resource-group&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:3007/&quot;</span> <span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>            <span class="nt">&lt;span</span> <span class="na">property=</span><span class="s">&quot;http://ibm.com/ce/ns#modificationCount&quot;</span> <span class="na">datatype=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema#integer&quot;</span> <span class="nt">&gt;</span>0<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>            <span class="nt">&lt;span</span> <span class="na">property=</span><span class="s">&quot;http://ibm.com/ce/ns#lastModified&quot;</span> <span class="na">datatype=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema#dateTime&quot;</span> <span class="nt">&gt;</span>2014-04-02T20:47:43.088000+00:00<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>            <span class="nt">&lt;span</span> <span class="na">property=</span><span class="s">&quot;http://purl.org/dc/terms/created&quot;</span> <span class="na">datatype=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema#dateTime&quot;</span> <span class="nt">&gt;</span>2014-04-02T20:47:43.088000+00:00<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://ibm.com/ce/ns#lastModifiedBy&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:3001/unknown_user/c655a7bf-41d5-4622-837a-57cb611bb79b&quot;</span> <span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://ibm.com/ce/ns#allVersions&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:3007/items/5.1/allVersions&quot;</span> <span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>            <span class="nt">&lt;a</span> <span class="na">property=</span><span class="s">&quot;http://purl.org/dc/terms/creator&quot;</span> <span class="na">href=</span><span class="s">&quot;http://localhost:3001/unknown_user/c655a7bf-41d5-4622-837a-57cb611bb79b&quot;</span> <span class="nt">&gt;&lt;/a&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This will be surprising to many HTML programmers. This looks nothing like the UI that was presented!</p>

<p>The HTML returned from the todo sever (just like every LDA-based server) contains an RDFa representation of the data resource, <a href="http://localhost:3007/items">http://localhost:3007/items</a> in this case. This HTML does not attempt to render the information in any interesting way and even if it did, we are not using it. What happens instead is, on line 3 the todo application&rsquo;s <em>application.js</em> file (as described in the previous section) is loaded, which in turn loads another html file (<em>list.html</em> in this case) over top of it. [On our to-do list is to allow server developers to embellish the RDFa representation for search-engine optimization, but not to implement UI presentation.] What the user actually sees is the content provided by <em>list.html</em>.</p>

<p>[If you turn off javascript in the browser, you will actually see the RDFa rendered. There is also an environment variable you can set on the server that will generate more elaborate RDFa that actually does render itself in a more readable way if Javascript is off. This will not give you a reasonable UI for your application, but it can be useful/amusing for debugging or pedagogical purposes.]</p>

<p>Why do we do things this way? This approach allows a very clean separation of the server, which concerns itself only with business logic and data storage, and the user interface, which is implemented in HTML and javascript and which does not even have to reside on the same server as the business logic (we have run with the UI files on Amazon S3, for example).</p>

<h3>The Todo Client Implementation</h3>

<p>Let&rsquo;s look at the actual display-generating html file that is loaded when we&rsquo;re looking at the todo list (that&rsquo;s <em>lda-examples/todo/wsgi/static/todo/list.html</em>, if you&rsquo;re looking at the project source):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;item&quot;</span> <span class="na">name=</span><span class="s">&quot;item&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;What do you need to do?&quot;</span> <span class="na">style=</span><span class="s">&quot;width: 200px;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">value=</span><span class="s">&quot;Add Todo Item&quot;</span> <span class="na">onClick=</span><span class="s">&quot;addItem();&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;hr&gt;</span>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;todoItems&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;hr&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'><span class="kd">function</span> <span class="nx">appendItem</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">location</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;todoItems&quot;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="s2">&quot;&lt;li&gt;&lt;a href=\&quot;&quot;</span> <span class="o">+</span> <span class="nx">location</span> <span class="o">+</span> <span class="s2">&quot;\&quot;&gt;&quot;</span> <span class="o">+</span> <span class="nx">item</span> <span class="o">+</span> <span class="s2">&quot;&lt;/a&gt;&lt;/li&gt;&quot;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">displayItems</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">APPLICATION_ENVIRON</span><span class="p">.</span><span class="nx">initial_simple_jso</span><span class="p">.</span><span class="nx">bp_members</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">appendItem</span><span class="p">(</span><span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">dc_title</span><span class="p">,</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">_subject</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">addItem</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">title</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;item&quot;</span><span class="p">).</span><span class="nx">value</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">title</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;_subject&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;dc_title&quot;</span><span class="o">:</span> <span class="nx">title</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;rdf_type&quot;</span><span class="o">:</span> <span class="s2">&quot;http://example.org/todo#Item&quot;</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">ld_util</span><span class="p">.</span><span class="nx">send_create</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">item</span><span class="p">);</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">201</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">location</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">getResponseHeader</span><span class="p">(</span><span class="s2">&quot;location&quot;</span><span class="p">);</span>
</span><span class='line'>        <span class="nx">appendItem</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">dc_title</span><span class="p">,</span> <span class="nx">location</span><span class="p">);</span>
</span><span class='line'>        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;item&quot;</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// allow enter key to be pressed and act as submit</span>
</span><span class='line'><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;item&#39;</span><span class="p">).</span><span class="nx">onkeydown</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">e</span> <span class="o">=</span> <span class="nx">e</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="mi">13</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">addItem</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="nx">displayItems</span><span class="p">();</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>For anyone familiar with html/javascript programming, there should be nothing surprising here. This is a very simple UI, intentionally written using no fancy UI frameworks/libraries other than the LDA clientlib. We have other samples that use UI frameworks to provide much nicer displays, but here we kept the example as simple as absolutely possible.</p>

<p>From an &lsquo;understanding LDA&rsquo; perspective, the interesting parts are the two Javascript functions, <em>displayItems()</em> and <em>addItems()</em> on lines 12 and 19 respectively. As you can see, <em>displayItems()</em>, which is called when a resource of type <a href="http://open-services.net/ns/basicProfile#Container">http://open-services.net/ns/basicProfile#Container</a> (see application.js in previous section) is initially loaded, iterates over and displays the list of items that are found in something called APPLICATION_ENVIRON.initial_simple_jso.bp_members. Where did that come from, you ask?</p>

<p>Recall that when <em>application.js</em> ran, it loaded the lda-clientlib utility library, <em>ld_utils.js</em>, and then called an onload function in that library. The RDFa content in the HTML representation of the resource holds important information, but not in a format that is very friendly to Javascript programmers, so the utility onload function converts it to more usable Javascript objects in memory &ndash; a simple RDF format we refer to as &lsquo;simple JSO&rsquo; (JSO stands for JavaScript Objects, as in JSON, but without the N for Notation part) &ndash; which it then sets as a property called initial_simple_jso in a global variable called APPLICATION_ENVIRON. In this example, the &lsquo;simple JSO&rsquo; is that of an RDF container type (bp_Container) whose members are exposed in a field named &lsquo;bp_members&rsquo;.</p>

<p>To understand the representation of an actual item in the todo list, let&rsquo;s take a closer look at the <em>addItem()</em> function from <em>list.html</em>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">addItem</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">title</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;item&quot;</span><span class="p">).</span><span class="nx">value</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">title</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;_subject&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;dc_title&quot;</span><span class="o">:</span> <span class="nx">title</span><span class="p">,</span>
</span><span class='line'>        <span class="s2">&quot;rdf_type&quot;</span><span class="o">:</span> <span class="s2">&quot;http://example.org/todo#Item&quot;</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">ld_util</span><span class="p">.</span><span class="nx">send_create</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">item</span><span class="p">);</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">201</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">location</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">getResponseHeader</span><span class="p">(</span><span class="s2">&quot;location&quot;</span><span class="p">);</span>
</span><span class='line'>        <span class="nx">appendItem</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">dc_title</span><span class="p">,</span> <span class="nx">location</span><span class="p">);</span>
</span><span class='line'>        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;item&quot;</span><span class="p">).</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The most interesting part is the call to <em>ld_util.send_create()</em> on line 11. This a simple utiity function that does nothing more than set a couple of standard headers and send an HTTP POST message. The URL we send the post to is the first argument &ndash; &ldquo;&rdquo; &ndash; the null relative address, which is equivalent to <a href="http://localhost:3007/items,">http://localhost:3007/items,</a> since that is the url the browser is on. The object we send in the POST body also has its _subject set to the null relative address, but this address will be interpreted as being relative to the to-be-created resource, not the container we&rsquo;re POSTing to.</p>

<p>If the server responds with &lsquo;201 Created&rsquo; the todo text (stored in the dc_title field of the item) and the returned &lsquo;Location&rsquo; response header (the URL of the newly-created ressource) are passed to the <em>appendItem()</em> function which will add the new item to the list of items being displayed.</p>

<p>Returning to the web browser, notice that each entry added to the todo list is also a clickable link in the UI. If you click on the first entry in the todo list we previously created, you will see a (less than user-freindly, but instructive) representation of that entry:</p>

<p><img src="images/image4.png" alt="" /></p>

<p>All we are displaying here is a formatted representaion of the &lsquo;simple JSO&rsquo; for the todo item. The code that does this is in the file <em>item.html</em> (remember that our <em>application.js</em> loads the file <em>item.html</em> when the resource is a todo item). In case you&rsquo;re curious, here is the implementation code (in <em>lda-examples/todo/wsgi/static/todo/list.html</em>):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script&gt;</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">stringified_jso</span> <span class="o">=</span> <span class="s1">&#39;&lt;pre&gt;&#39;</span> <span class="o">+</span> <span class="nx">rdf_util</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">APPLICATION_ENVIRON</span><span class="p">.</span><span class="nx">initial_simple_jso</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&lt;/pre&gt;&#39;</span>
</span><span class='line'>    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">stringified_jso</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Notice that the displayed represntation of a todo item includes a few more properties than the ones we POSTed in the <em>addItem()</em> function. These properties are automatically added and maintained by the LDA framework.</p>

<h3>Creating (POSTing) Resources</h3>

<p>When we created a new item resource, above, we POSTed to the URL <a href="http://localhost:3007/items.">http://localhost:3007/items.</a> In general, <a href="http://localhost:3007/x">http://localhost:3007/x</a> &ndash; where x is any simple path segment &ndash; is the name of a container to which you can POST to create new resources, and which you can GET to see what you already have. [Of course, you can override all this default behavior if you want by writing Python code.] If you POST to <a href="http://localhost:3007/x,">http://localhost:3007/x,</a> it will create a resource whose URL is <a href="http://localhost:3007/x/n.m,">http://localhost:3007/x/n.m,</a> where n is the numerical id of the server copy that handles the request (a small monotonically-increasing number) and m is the numerical id of the resource (another monotonically-increasing number). Clients do not need to know this information &ndash; for them URLs should be opaque and anyway we may choose to change these rules on the server &ndash; but you as a server developer using the framework may be interested.</p>

<p>To summarize, &lsquo;items&rsquo; is just the value of x we use for the todo example &ndash; you can actually enter <a href="http://localhost:3007/x">http://localhost:3007/x</a> where x is anything you fancy. Normally the application would be running behind a reverse proxy that is configured to only forward the values of x that you have chosen for your subsystems, but here we are running wide-open in development so you can enter anything.</p>

<h3>Deleting Resources</h3>

<p>You may have noticed that the &lsquo;Todo List&rsquo; application&rsquo;s UI doesn&rsquo;t give you a way to delete items from the list. Because the todo server is using the fully-functional base implementation (of logic_tier.py), the server already supports DELETE. All that&rsquo;s needed is the UI part. Adding a delete button to the UI would be a simple enhancement, but we&rsquo;ll leave that as an excercise for the reader (hint: there is another convenient utility function in ld_util.js called <em>send_delete()</em>).</p>

<p>For now, and to prove that the application uses a true REST model, you can delete any item by simply sending an HTTP DELETE request to the item resource. For example, using curl, you can delete the first entry we created above by executing the following command:</p>

<p><img src="images/image6.png" alt="" /></p>

<p>If you now refresh the browser window and look at the todo list you&rsquo;ll see that the first entry we previously created is no longer in the list:</p>

<p><img src="images/image7.png" alt="" /></p>

<h2>A Note about Containers</h2>

<p>In the &lsquo;Todo List&rsquo; example, we viewed and POSTed to a container whose URL is &lsquo;/items&rsquo;. This container is useful for bootstrapping, because it pre-exists without us doing anything, but it is better for applications to create their containers explicitly. Suppose I have an application that manages several todo lists, instead of just one. We could use &lsquo;/items1&rsquo; and &lsquo;/items2&rsquo; for this purpose, but doing so has at least two disadvantages:</p>

<ol>
<li> You will have to update the routing tables of the reverse proxy each time you add another container</li>
<li> The contents of &lsquo;/items1&rsquo; and &lsquo;/items2&rsquo; will be stored in different database collections, so you will not be able to do any queries that span both of them</li>
</ol>


<p>Fortunately the alternative is very simple. You can execute these two statements:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">response</span> <span class="o">=</span> <span class="nx">ld_util</span><span class="p">.</span><span class="nx">send_create</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">_subject</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">rdf_type</span> <span class="o">:</span> <span class="k">new</span> <span class="nx">rdf_util</span><span class="p">.</span><span class="nx">URI</span><span class="p">(</span><span class="s1">&#39;http://open-services.net/ns/basicProfile#Container&#39;</span><span class="p">),</span>
</span><span class='line'>    <span class="nx">bp_membershipPredicate</span><span class="o">:</span> <span class="s1">&#39;items1&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">bp_membershipSubject</span><span class="o">:</span> <span class="k">new</span> <span class="nx">rdf_util</span><span class="p">.</span><span class="nx">URI</span><span class="p">(</span><span class="s1">&#39;http://localhost:3007/&#39;</span><span class="p">)}</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="nx">response</span> <span class="o">=</span> <span class="nx">ld_util</span><span class="p">.</span><span class="nx">send_create</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">_subject</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">rdf_type</span><span class="o">:</span> <span class="k">new</span> <span class="nx">rdf_util</span><span class="p">.</span><span class="nx">URI</span><span class="p">(</span><span class="s1">&#39;http://open-services.net/ns/basicProfile#Container&#39;</span><span class="p">),</span>
</span><span class='line'>    <span class="nx">bp_membershipPredicate</span><span class="o">:</span> <span class="s1">&#39;items2&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">bp_membershipSubject</span><span class="o">:</span> <span class="k">new</span> <span class="nx">rdf_util</span><span class="p">.</span><span class="nx">URI</span><span class="p">(</span><span class="s1">&#39;http://localhost:3007/&#39;</span><span class="p">)}</span>
</span><span class='line'><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>This will create new resources with URLs something like &lsquo;/items/1.3&rsquo; and &lsquo;/items/1.4&rsquo; respectively. Each of these is a container, just like &lsquo;/items&rsquo;.</p>

<p>You can now execute this statement:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">response</span> <span class="o">=</span> <span class="nx">ld_util</span><span class="p">.</span><span class="nx">send_create</span><span class="p">(</span><span class="s1">&#39;/items/1.3&#39;</span><span class="p">,</span> <span class="nx">new_item</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>to add an item to the first (items1) list, or this statement:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">response</span> <span class="o">=</span> <span class="nx">ld_util</span><span class="p">.</span><span class="nx">send_create</span><span class="p">(</span><span class="s1">&#39;/items/1.4&#39;</span><span class="p">,</span> <span class="nx">new_item</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>to add it to the second (items2) list.</p>

<p>You can point your browser at either list URL to view and add to its corresponding list of items.</p>

  
    <footer>
      <p class="meta">
        
        








  


<time datetime="2014-04-02T13:45:00-04:00" pubdate data-updated="true">Apr 2<span>nd</span>, 2014</time>
        
      </p>
      
        <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://ld4apps.github.io/developing-lda-applications/index.html" data-via="" data-counturl="http://ld4apps.github.io/developing-lda-applications/index.html" >Tweet</a>
  
  
  
</div>

      
    </footer>
  
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Guides</h1>
  <ul id="Pages">
    
    	
    	
    
    	
    	
    
    	
    	
    
    	
        <li class="page">
            <a href="/developing-lda-applications/index.html">Developing LDA Applications</a>
        </li>
        
    
    	
        <li class="page">
            <a href="/downloading-the-software/index.html">Downloading the Software</a>
        </li>
        
    
    	
        <li class="page">
            <a href="/index.html">Getting Started</a>
        </li>
        
    
    	
        <li class="page">
            <a href="/lda-client-libraries/index.html">LDA Client Libraries</a>
        </li>
        
    
    	
        <li class="page">
            <a href="/lda-server-libraries/index.html">LDA Server Libraries</a>
        </li>
        
    
    	
        <li class="page">
            <a href="/mpnally-tutorial/index.html">Original Mpnally Tutorial</a>
        </li>
        
    
    	
    	
    
    	
        <li class="page">
            <a href="/what-is-this-rdf-thing/index.html">What Is This RDF Thing?</a>
        </li>
        
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/ld4apps">@ld4apps</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'ld4apps',
            count: 20,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
